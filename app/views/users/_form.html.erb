<% action = (@user.persisted? ? user_url(@user) : users_url) %>
<% method = (@user.persisted? ? "patch" : "post") %>
<% message = (@user.persisted? ? "Update User" : "Create User") %>

<form action="<%=action %>" method="post">
<input type="hidden" name="_method" value="<%= method %>">
<input type="hidden" name="authenticity_token" value="<%=form_authenticity_token %>">
<label for="user_name">Name</label>
<input type="text" name="user[name]" id="user_name">
<br />
<label for="user_password">Password</label>
<input type="password" name="user[password]" id="user_password">
<br />
<input type="submit" value="<%= message%>">
</form>